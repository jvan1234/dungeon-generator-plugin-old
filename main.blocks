<xml xmlns="https://developers.google.com/blockly/xml"><block type="pxt-on-start" id="B#{R1KJ0~zS:Q~_yTh~I" x="0" y="0"><statement name="HANDLER"><block type="typescript_statement" id="5d,Cj0okfBTs]tnJNN}n" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="namespace Dungeon_Generation {" line1="    /**" line2="     * TODO: This function generates a random dungeon given some parameters" line3="     * @param length describes how long the dungeon will be, in tiles. eg: 10" line4="     */" line5="    //% block" line6="    export function Generate_Random_Dungeon(length: number, width: number, water_chance: number) {" line7="        let yIndex: number;" line8="        let yIndex2: number;" line9="        tiles.setCurrentTilemap(tilemap`GeneratedDungeon`)" line10="        tiles.setTileAt(tiles.getTileLocation(1, 1), assets.tile`" line11="                myTile" line12="            `)" line13="        //  This code implements walls at the edges of the screen by checking if the x/y index was either 0 or the length/width" line14="        let xIndex = 0" line15="        while (xIndex &lt;= length) {" line16="            yIndex = 0" line17="            while (yIndex &lt;= width) {" line18="                if (xIndex == 0 || xIndex == length) {" line19="                    tiles.setTileAt(tiles.getTileLocation(xIndex, yIndex), assets.tile`" line20="                            wall" line21="                        `)" line22="                    tiles.setWallAt(tiles.getTileLocation(xIndex, yIndex), true)" line23="                }" line24="                " line25="                if (yIndex == 0 || yIndex == width) {" line26="                    tiles.setTileAt(tiles.getTileLocation(xIndex, yIndex), assets.tile`" line27="                            wall" line28="                        `)" line29="                    tiles.setWallAt(tiles.getTileLocation(xIndex, yIndex), true)" line30="                }" line31="                " line32="                yIndex += 1" line33="            }" line34="            xIndex += 1" line35="        }" line36="        //  This code will place grass/water along the dungeon." line37="        let xIndex2 = 0" line38="        while (xIndex2 &lt;= length) {" line39="            yIndex2 = 0" line40="            while (yIndex2 &lt;= width) {" line41="                if (!(tiles.tileAtLocationIsWall(tiles.getTileLocation(xIndex2, yIndex2)) || tiles.tileAtLocationEquals(tiles.getTileLocation(xIndex2, yIndex2), assets.tile`" line42="                        myTile" line43="                    `))) {" line44="                    if (Math.percentChance(water_chance)) {" line45="                        tiles.setTileAt(tiles.getTileLocation(xIndex2, yIndex2), assets.tile`" line46="                                water" line47="                            `)" line48="                    } else {" line49="                        tiles.setTileAt(tiles.getTileLocation(xIndex2, yIndex2), assets.tile`" line50="                                grassA" line51="                            `)" line52="                    }" line53="                    " line54="                }" line55="                " line56="                yIndex2 += 1" line57="            }" line58="            xIndex2 += 1" line59="        }" line60="    }" line61="}" numlines="62"></mutation></block></statement></block></xml>